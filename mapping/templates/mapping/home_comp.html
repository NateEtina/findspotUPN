{% load static %}

{% for item in buildings %}

map.on('load', () => {

    var popup = new mapboxgl.Popup({
        offset: 25,
        closeButton: true,
        closeOnClick: true,
      }).setHTML('<li>Afficher la description</li>'); 

    var iconElement = document.createElement('div');
    iconElement.className = 'marker1';

    var subtitle = document.createElement('h4');
    subtitle.className = 'subtitle'
    subtitle.textContent = '{{ item.name|safe }}';

    iconElement.appendChild(subtitle);

    new mapboxgl.Marker(iconElement)
        .setLngLat([{{ item.longitude|safe }}, {{ item.latitude|safe }}])
        .setPopup(popup)
        .addTo(map);
            
});
{% endfor %}

{% for item in bureaux %}
map.on('load', () => {
    var iconElement = document.createElement('div');
    iconElement.className = 'marker2';

    var subtitle = document.createElement('h4');
    subtitle.className = 'subtitle'
    subtitle.textContent = '{{ item.name|safe }}';

    iconElement.appendChild(subtitle);

    new mapboxgl.Marker(iconElement)
        .setLngLat([{{ item.longitude|safe }}, {{ item.latitude|safe }}])
        .addTo(map);
});
{% endfor %}

{% for item in locals %}
map.on('load', () => {
    var iconElement = document.createElement('div');
    iconElement.className = 'marker3';

    var subtitle = document.createElement('h4');
    subtitle.className = 'subtitle'
    subtitle.textContent = '{{ item.name|safe }}';

    iconElement.appendChild(subtitle);

    new mapboxgl.Marker(iconElement)
        .setLngLat([{{ item.longitude|safe }}, {{ item.latitude|safe }}])
        .addTo(map);
            
});
{% endfor %}

{% for item in spaces %}
map.on('load', () => {
    var iconElement = document.createElement('div');
    iconElement.className = 'marker4';

    var subtitle = document.createElement('h4');
    subtitle.className = 'subtitle'
    subtitle.textContent = '{{ item.name|safe }}';

    iconElement.appendChild(subtitle);

    new mapboxgl.Marker(iconElement)
        .setLngLat([{{ item.longitude|safe }}, {{ item.latitude|safe }}])
        .addTo(map);
            
});
{% endfor %}

